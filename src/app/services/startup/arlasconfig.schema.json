{
    "$schema": "http://json-schema.org/draft-06/schema#",
    "title": "Arlas WUI application  Configuration",
    "description": "The Configuration of an arlas web application",
    "type": "object",
    "$id": "arlasconfig.schema.json",
    "properties": {
        "arlas": {
            "description": "Configuration of ARLAS Wui Project",
            "type": "object",
            "properties": {
                "web": {
                    "description": "Configuration of ARLAS Web Front End",
                    "type": "object",
                    "properties": {
                        "contributors": {
                            "description": "Configuration of each arlas contributors",
                            "type": "object",
                            "patternProperties": {
                                "^(histogram\\$).*$": {
                                    "allOf": [
                                        {
                                            "$ref": "histogramContributorConf.schema.json#"
                                        }
                                    ]
                                },
                                "^(powerbars\\$).*$": {
                                    "allOf": [
                                        {
                                            "$ref": "powerbarsContributorConf.schema.json#"
                                        }
                                    ]
                                },
                                "^(resultlist\\$).*$": {
                                    "allOf": [
                                        {
                                            "$ref": "resultlistContributorConf.schema.json#"
                                        }
                                    ]
                                },
                                "^(map\\$).*$": {
                                    "allOf": [
                                        {
                                            "$ref": "mapContributorConf.schema.json#"
                                        }
                                    ]
                                },
                                "^(swimlane\\$).*$": {
                                    "allOf": [
                                        {
                                            "$ref": "swimlaneContributorConf.schema.json#"
                                        }
                                    ]
                                },
                                "^(chipsearch\\$).*$": {
                                    "allOf": [
                                        {
                                            "$ref": "chipssearchContributorConf.schema.json#"
                                        }
                                    ]
                                }
                            },
                            "additionalProperties": false
                        },
                        "analytics": {
                            "description": "Configuration of an Analytics Panel",
                            "type": "array",
                            "items": {
                                "description": "Analytic components organisation configuration",
                                "type": "object",
                                "properties": {
                                    "groupId": {
                                        "description": "Id of group to regroup component in same line",
                                        "type": "string"
                                    },
                                    "components": {
                                        "description": "List of components in group",
                                        "type": "array",
                                        "items": {
                                            "description": "Component configuration",
                                            "type": "object",
                                            "properties": {
                                                "contributorId": {
                                                    "description": "Identifer of contributor link to this component",
                                                    "type": "string"
                                                },
                                                "componentType": {
                                                    "description": "Type of component",
                                                    "enum": [
                                                        "histogram",
                                                        "powerbars",
                                                        "swimlane"
                                                    ]
                                                },
                                                "inputHistogram": {
                                                    "description": "Input of histogram component.",
                                                    "allOf": [
                                                        {
                                                            "$ref": "histogram.schema.json#"
                                                        }
                                                    ]
                                                },
                                                "inputPowerBars": {
                                                    "description": "Input of powerbars component.",
                                                    "allOf": [
                                                        {
                                                            "$ref": "powerbars.schema.json#"
                                                        }
                                                    ]
                                                },
                                                "inputSwimlane": {
                                                    "description": "Input of swimlane component.",
                                                    "allOf": [
                                                        {
                                                            "$ref": "swimlane.schema.json#"
                                                        }
                                                    ]
                                                }
                                               
                                            },
                                            "required": [
                                                "contributorId",
                                                "componentType"
                                            ],  "anyOf": [
                                                {
                                                  "properties": {
                                                    "componentType": { "enum": ["histogram"] }
                                                  },
                                                  "required": ["inputHistogram"]
                                                },
                                                {
                                                    "properties": {
                                                      "componentType": { "enum": ["powerbars"] }
                                                    },
                                                    "required": ["inputPowerBars"]
                                                  },
                                                  {
                                                    "properties": {
                                                      "componentType": { "enum": ["swimlane"] }
                                                    },
                                                    "required": ["inputSwimlane"]
                                                  }
                                              ]
                                        }
                                    },
                                    "title": {
                                        "description": "Title of panel group",
                                        "type": "string"
                                    },
                                    "icon": {
                                        "description": "Icon of panel group, from material design icon",
                                        "type": "string"
                                    }
                                },
                                "required": [
                                    "groupId",
                                    "components"
                                ]
                            }
                        }
                    },
                    "required": [
                        "contributors"
                    ]
                },
                "server": {
                    "description": "Configuration of ARLAS Web Server",
                    "type": "object",
                    "properties": {
                        "url": {
                            "description": "URL of ARLAS Web Server",
                            "type": "string"
                        },
                        "collection": {
                            "description": "Configuration of ARLAS Collection",
                            "type": "object",
                            "properties": {
                                "id": {
                                    "description": "Id of an entity in collection",
                                    "type": "string"
                                },
                                "name": {
                                    "description": "Name of ARLAS Collection",
                                    "type": "string"
                                }
                            },
                            "required": [
                                "id",
                                "name"
                            ]
                        },
                        "max_age_cache": {
                            "description": "During of cache",
                            "type": "integer"
                        }
                    },
                    "required": [
                        "url",
                        "collection"
                    ]
                }
            },
            "required": [
                "web",
                "server"
            ]
        }
    },
    "required": [
        "arlas"
    ]
}